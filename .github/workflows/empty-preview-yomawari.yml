name: Fake Preview Deployment
on:
  workflow_dispatch:
    inputs:
      go-version:
        description: "Go version"
        required: false
        default: "1.23"
  push:
    branches-ignore:
      - master
    paths: 
    - 'yomawari/**'
    - '.github/workflows/empty-preview-yomawari.yaml'

env:
  GO_VERSION: ${{ github.event.inputs.go-version || '1.23' }}
  working-directory: ./yomawari

jobs:
  Deploy-Preview:
    runs-on: ubuntu-latest
    environment:
      name: Preview â€“ fake

    steps:
      - uses: actions/checkout@v6

      - uses: actions/setup-go@v5
        with:
          go-version: ${{ env.GO_VERSION }}
      
      - name: Yomawari
        run:  go mod tidy && go build .
        working-directory: ${{ env.working-directory }}
